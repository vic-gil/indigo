class RIYoutube extends HTMLElement{connectedCallback(){this.videoId=this.getAttribute("videoid"),this.origin=this.getAttribute("origin"),this.thumbnail=this.getAttribute("thumbnail");let e=this.querySelector(".riyt-play");if(this.playLabel=e&&e.textContent.trim()||this.getAttribute("playlabel")||"Play",null!==this.thumbnail&&(this.posterUrl=`https://i.ytimg.com/vi/${this.videoId}/hqdefault.jpg`,RIYoutube.agregarPrefetch("preload",this.posterUrl,"image"),this.style.backgroundImage=`url("${this.posterUrl}")`),e||((e=document.createElement("button")).type="button",e.classList.add("riyt-playbtn"),this.append(e)),!e.textContent){const t=document.createElement("span");t.className="riyt-visually-hidden",t.textContent=this.playLabel,e.append(t)}this.addEventListener("pointerover",RIYoutube.preConexiones,{once:!0}),this.addEventListener("click",e=>this.agregarIframe())}static agregarPrefetch(e,t,r){const i=document.createElement("link");i.rel=e,i.href=t,r&&(i.as=r),document.head.append(i)}static preConexiones(){RIYoutube.preconnected||(RIYoutube.agregarPrefetch("preconnect","https://www.youtube-nocookie.com"),RIYoutube.agregarPrefetch("preconnect","https://www.google.com"),RIYoutube.agregarPrefetch("preconnect","https://googleads.g.doubleclick.net"),RIYoutube.agregarPrefetch("preconnect","https://static.doubleclick.net"),RIYoutube.preconnected=!0)}agregarIframe(){const e=new URLSearchParams(this.getAttribute("params")||[]);this.classList.add("riyt-activated");const t=document.createElement("iframe");t.width=560,t.height=315,t.title=this.playLabel,t.allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",t.allowFullscreen=!0,t.src=`https://www.youtube.com/embed/?${e.toString()}`,this.append(t),this.querySelector("iframe").focus()}}customElements.define("ri-youtube",RIYoutube);
